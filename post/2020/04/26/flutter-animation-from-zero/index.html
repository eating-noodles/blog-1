<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="chrome=1"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="referrer" content="no-referrer"><meta name="theme-color" content="#333333"><meta name="mobile-web-app-capable" content="yes"><meta name="google" content="notranslate"><meta name="format-detection" content="telephone=no"><meta name="keyword" content="å†·çŸ³, å‰ç«¯, é¢è¯•ï¼ŒWeb, Js, CSS, Node.js, Frontend, Flutter, Docker, Dart, Mysql, Egg.js"><meta name="description" content="å­‘ç„¶ä¸€èº«ï¼Œå‚²ç«‹äºä¸–"><title>ä»é›¶å¼€å§‹çš„ Flutter åŠ¨ç”» - å†·çŸ³çš„åšå®¢</title><base href="/"><link rel="preconnect" href="//cdn.bootcss.com"><link rel="manifest" href="/manifest.json"><link rel="shortcut icon" href="/icons/icon-72x72.png"><link rel="apple-touch-icon" href="/icons/icon-192x192.png"><link href="https://cdn.bootcss.com/highlight.js/9.15.10/styles/atom-one-light.min.css" rel="stylesheet"><link href="https://cdn.bootcss.com/highlight.js/9.15.10/styles/atom-one-dark.min.css" rel="stylesheet" media="screen and (prefers-color-scheme:dark)"><link href="https://cdn.bootcss.com/uikit/3.2.0/css/uikit.min.css" rel="stylesheet"><script src="https://cdn.bootcss.com/uikit/3.2.0/js/uikit.min.js" async></script><script src="https://cdn.bootcss.com/uikit/3.2.0/js/uikit-icons.min.js" async></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css" integrity="sha256-uqQQGnDcmRKvhKwc5Vm4XT1GQ2oV6t1U0NR2N9tV+BQ=" crossorigin="anonymous"><link rel="stylesheet" href="/styles/cold-stone.css"><noscript><p class="text-center">ä½ çš„æµè§ˆå™¨è¿˜æ²¡å¼€å¯ Javascript åŠŸèƒ½ï¼</p></noscript><meta name="generator" content="Hexo 4.0.0"></head><body><header class="header" uk-sticky="top: 100; animation: uk-animation-slide-top; bottom: #sticky-on-scroll-up"><nav class="wrapper header-content"><div class="nav-overlay uk-navbar-left"><h1 class="title nav-list-item uk-logo" data-link="/"><a href="/" data-link="/">å†·çŸ³</a></h1><ul class="nav-list"><li class="nav-list-item" data-link="/activity/"><a class="nav-list-link" href="/activity">åŠ¨æ€</a></li><li class="nav-list-item" data-link="/categories/"><a class="nav-list-link" href="/categories">åˆ†ç±»</a></li><li class="nav-list-item" data-link="/about/"><a class="nav-list-link" href="/about/">å…³äº</a></li></ul></div><div class="uk-navbar-right translate-x"><a class="uk-navbar-toggle" href="#modal-full" uk-search-icon uk-toggle></a></div></nav><div class="header-bar"></div></header><div id="modal-full" class="uk-modal-full uk-modal" uk-modal><div class="uk-modal-dialog uk-flex uk-flex-center uk-flex-middle" uk-height-viewport><button class="uk-modal-close-full" type="button" uk-close></button><form class="uk-search uk-search-large search-form" action="//google.com/search" method="get" accept-charset="UTF-8" target="_blank"><input class="uk-search-input search-form-input" type="search" name="q" placeholder="æœç´¢" autofocus autocomplete="false"> <input type="hidden" name="sitesearch" value="https://coldstone.fun"></form></div></div><main class="main wrapper"><article class="article slide-in-right uk-article"><section class="article-header"><h1 class="article-title uk-article-title">ä»é›¶å¼€å§‹çš„ Flutter åŠ¨ç”»</h1><p class="article-meta uk-article-meta"><span class="meta-info"><span>æœ€åæ›´æ–°&#58;<time class="post-time" datetime="2020-06-18">2020-06-18</time> </span><span>é˜…è¯»æ—¶é—´&#58; 11 min</span> <span class="hide" id="busuanzi_container_page_pv">é˜…è¯»é‡&#58; <span id="busuanzi_value_page_pv"></span></span></span></p></section><section class="article-content"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åŠ¨ç”»æœ¬è´¨æ˜¯åœ¨ä¸€æ®µæ—¶é—´å†…ä¸æ–­æ”¹å˜å±å¹•ä¸Šæ˜¾ç¤ºçš„å†…å®¹ï¼Œä»è€Œäº§ç”Ÿ<a href="https://zh.wikipedia.org/wiki/%E8%A6%96%E8%A6%BA%E6%9A%AB%E7%95%99" target="_blank" rel="noopener">è§†è§‰æš‚ç•™</a>ç°è±¡ã€‚</p><p>åŠ¨ç”»ä¸€èˆ¬å¯åˆ†ä¸ºä¸¤ç±»ï¼š</p><p><strong>è¡¥é—´åŠ¨ç”»</strong>ï¼šè¡¥é—´åŠ¨ç”»æ˜¯ä¸€ç§é¢„å…ˆå®šä¹‰ç‰©ä½“è¿åŠ¨çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œç‰©ä½“çš„è¿åŠ¨æ–¹å¼ï¼Œè¿åŠ¨æ—¶é—´ï¼Œæ—¶é—´æ›²çº¿ï¼Œç„¶åä»èµ·ç‚¹è¿‡æ¸¡åˆ°ç»ˆç‚¹çš„åŠ¨ç”»ã€‚</p><p><strong>åŸºäºç‰©ç†çš„åŠ¨ç”»</strong>ï¼šåŸºäºç‰©ç†çš„åŠ¨ç”»æ˜¯ä¸€ç§æ¨¡æ‹Ÿç°å®ä¸–ç•Œè¿åŠ¨çš„åŠ¨ç”»ï¼Œé€šè¿‡å»ºç«‹è¿åŠ¨æ¨¡å‹æ¥å®ç°ã€‚ä¾‹å¦‚ä¸€ä¸ªç¯®çƒğŸ€ä»é«˜å¤„è½ä¸‹ï¼Œéœ€è¦æ ¹æ®å…¶ä¸‹è½é«˜åº¦ï¼Œé‡åŠ›åŠ é€Ÿåº¦ï¼Œåœ°é¢åå¼¹åŠ›ç­‰å½±å“å› ç´ æ¥å»ºç«‹è¿åŠ¨æ¨¡å‹ã€‚</p><h2 id="Flutter-ä¸­çš„åŠ¨ç”»"><a href="#Flutter-ä¸­çš„åŠ¨ç”»" class="headerlink" title="Flutter ä¸­çš„åŠ¨ç”»"></a>Flutter ä¸­çš„åŠ¨ç”»</h2><p>Flutter ä¸­æœ‰å¤šç§ç±»å‹çš„åŠ¨ç”»ï¼Œå…ˆä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œä½¿ç”¨ä¸€ä¸ª <code>AnimatedContainer</code> æ§ä»¶ï¼Œç„¶åè®¾ç½®åŠ¨ç”»æ—¶é•¿ <code>duration</code>ï¼Œæœ€åè°ƒç”¨ <code>setState</code> æ–¹æ³•æ”¹å˜éœ€è¦å˜åŒ–çš„å±æ€§å€¼ï¼Œä¸€ä¸ªåŠ¨ç”»å°±åˆ›å»ºäº†ã€‚</p><img src="./images/flutter-animation-from-zero/animated-container.gif" alt="animated-container" style="width:240px" width="240"><p>ä»£ç å¦‚ä¸‹</p><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;

class AnimatedContainerPage extends StatefulWidget {
  @override
  _AnimatedContainerPageState createState() =&gt; _AnimatedContainerPageState();
}

class _AnimatedContainerPageState extends State&lt;AnimatedContainerPage&gt; {
  // åˆå§‹çš„å±æ€§å€¼
  double size = 100;
  double raidus = 25;
  Color color = Colors.yellow;

  void _animate() {
    // æ”¹å˜å±æ€§å€¼
    setState(() {
      size = size == 100 ? 200 : 100;
      raidus = raidus == 25 ? 100 : 25;
      color = color == Colors.yellow ? Colors.greenAccent : Colors.yellow;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text(&#39;Animated Container&#39;)),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            // åœ¨ AnimatedContainer ä¸Šåº”ç”¨å±æ€§å€¼
            AnimatedContainer(
              width: size,
              height: size,
              curve: Curves.easeIn,
              padding: const EdgeInsets.all(20.0),
              decoration: BoxDecoration(
                color: color,
                borderRadius: BorderRadius.circular(raidus),
              ),
              duration: Duration(seconds: 1),
              child: FlutterLogo(),
            )
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _animate,
        child: Icon(Icons.refresh),
      ),
    );
  }
}
</code></pre><p>è¿™æ˜¯ä¸€ä¸ªéšå¼åŠ¨ç”»ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰æ˜¾å¼åŠ¨ç”»ï¼ŒHreo åŠ¨ç”»ï¼Œäº¤ç»‡åŠ¨ç”»ã€‚</p><h2 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h2><p>Flutter åŠ¨ç”»æ˜¯å»ºç«‹åœ¨ä»¥ä¸‹çš„æ¦‚å¿µä¹‹ä¸Šã€‚</p><p><code>Animation</code></p><p>Flutter ä¸­çš„åŠ¨ç”»ç³»ç»ŸåŸºäº <code>Animation</code> å¯¹è±¡ï¼Œ å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¿å­˜äº†å½“å‰åŠ¨ç”»çš„å€¼å’ŒçŠ¶æ€ï¼ˆå¼€å§‹ã€æš‚åœã€å‰è¿›ã€å€’é€€ï¼‰ï¼Œä½†ä¸è®°å½•å±å¹•ä¸Šæ˜¾ç¤ºçš„å†…å®¹ã€‚UI å…ƒç´ é€šè¿‡è¯»å– <code>Animation</code> å¯¹è±¡çš„å€¼å’Œç›‘å¬çŠ¶æ€å˜åŒ–è¿è¡Œ <code>build</code> å‡½æ•°ï¼Œç„¶åæ¸²æŸ“åˆ°å±å¹•ä¸Šå½¢æˆåŠ¨ç”»æ•ˆæœã€‚</p><p>ä¸€ä¸ª <code>Animation</code> å¯¹è±¡åœ¨ä¸€æ®µæ—¶é—´å†…ä¼šæŒç»­ç”Ÿæˆä»‹äºä¸¤ä¸ªå€¼ä¹‹é—´çš„å€¼ï¼Œæ¯”è¾ƒå¸¸è§çš„ç±»å‹æ˜¯ <code>Animation&lt;double&gt;</code>ï¼Œé™¤ <code>double</code> ç±»å‹ä¹‹å¤–è¿˜æœ‰ <code>Animation&lt;Color&gt;</code> æˆ–è€… <code>Animation&lt;Size&gt;</code> ç­‰ã€‚</p><pre><code class="dart">abstract class Animation&lt;T&gt; extends Listenable implements ValueListenable&lt;T&gt; {
  /// ...
}</code></pre><p><code>AnimationController</code></p><p>å¸¦æœ‰æ§åˆ¶æ–¹æ³•çš„ <code>Animation</code> å¯¹è±¡ï¼Œç”¨æ¥æ§åˆ¶åŠ¨ç”»çš„å¯åŠ¨ï¼Œæš‚åœï¼Œç»“æŸï¼Œè®¾å®šåŠ¨ç”»è¿è¡Œæ—¶é—´ç­‰ã€‚</p><pre><code class="dart">class AnimationController extends Animation&lt;double&gt;
  with AnimationEagerListenerMixin, AnimationLocalListenersMixin, AnimationLocalStatusListenersMixin {
  /// ...
}

AnimationController controller = AnimationController(
  vsync: this,
  duration: Duration(seconds: 10),
);</code></pre><p><code>Tween</code></p><p>ç”¨æ¥ç”Ÿæˆä¸åŒç±»å‹å’ŒèŒƒå›´çš„åŠ¨ç”»å–å€¼ã€‚</p><pre><code class="dart">class Tween&lt;T extends dynamic&gt; extends Animatable&lt;T&gt; {
  Tween({ this.begin, this.end });
  /// ...
}

// double ç±»å‹
Tween&lt;double&gt; tween = Tween&lt;double&gt;(begin: -200, end: 200);

// color ç±»å‹
ColorTween colorTween = ColorTween(begin: Colors.blue, end: Colors.yellow);

// border radius ç±»å‹
BorderRadiusTween radiusTween = BorderRadiusTween(
  begin: BorderRadius.circular(0.0),
  end: BorderRadius.circular(150.0),
);</code></pre><p><code>Curve</code></p><p>Flutter åŠ¨ç”»çš„é»˜è®¤åŠ¨ç”»è¿‡ç¨‹æ˜¯åŒ€é€Ÿçš„ï¼Œä½¿ç”¨ <code>CurvedAnimation</code> å¯ä»¥å°†æ—¶é—´æ›²çº¿å®šä¹‰ä¸ºéçº¿æ€§æ›²çº¿ã€‚</p><pre><code class="dart">class CurvedAnimation extends Animation&lt;double&gt; with AnimationWithParentMixin&lt;double&gt; {
  /// ...
}

Animation animation = CurvedAnimation(parent: controller, curve: Curves.easeIn);</code></pre><p><code>Ticker</code></p><p><code>Ticker</code> ç”¨æ¥æ·»åŠ æ¯æ¬¡å±å¹•åˆ·æ–°çš„å›è°ƒå‡½æ•° <code>TickerCallback</code>ï¼Œæ¯æ¬¡å±å¹•åˆ·æ–°éƒ½ä¼šè°ƒç”¨ã€‚ç±»ä¼¼äº Web é‡Œé¢çš„ <code>requestAnimationFrame</code> æ–¹æ³•ã€‚</p><pre><code class="dart">class Ticker {
  /// ...
}

Ticker ticker = Ticker(callback);</code></pre><h2 id="éšå¼åŠ¨ç”»"><a href="#éšå¼åŠ¨ç”»" class="headerlink" title="éšå¼åŠ¨ç”»"></a>éšå¼åŠ¨ç”»</h2><p>éšå¼åŠ¨ç”»ä½¿ç”¨ Flutter æ¡†æ¶å†…ç½®çš„åŠ¨ç”»éƒ¨ä»¶åˆ›å»ºï¼Œé€šè¿‡è®¾ç½®åŠ¨ç”»çš„èµ·å§‹å€¼å’Œæœ€ç»ˆå€¼æ¥è§¦å‘ã€‚å½“ä½¿ç”¨ <code>setState</code> æ–¹æ³•æ”¹å˜éƒ¨ä»¶çš„åŠ¨ç”»å±æ€§å€¼æ—¶ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨è®¡ç®—å‡ºä¸€ä¸ªä»æ—§å€¼è¿‡æ¸¡åˆ°æ–°å€¼çš„åŠ¨ç”»ã€‚</p><p>æ¯”å¦‚ <code>AnimatedOpacity</code> éƒ¨ä»¶ï¼Œæ”¹å˜å®ƒçš„ <code>opacity</code> å€¼å°±å¯ä»¥è§¦å‘åŠ¨ç”»ã€‚</p><img src="./images/flutter-animation-from-zero/opacity-toggle.gif" alt="opacity-toggle" style="width:240px" width="240"><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;

class OpacityChangePage extends StatefulWidget {
  @override
  _OpacityChangePageState createState() =&gt; _OpacityChangePageState();
}

class _OpacityChangePageState extends State&lt;OpacityChangePage&gt; {
  double _opacity = 1.0;

  // æ”¹å˜ç›®æ ‡å€¼
  void _toggle() {
    _opacity = _opacity &gt; 0 ? 0.0 : 1.0;
    setState(() {});
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text(&#39;éšå¼åŠ¨ç”»&#39;)),
      body: Center(
        child: AnimatedOpacity(
          // ä¼ å…¥ç›®æ ‡å€¼
          opacity: _opacity,
          duration: Duration(seconds: 1),
          child: Container(
            width: 200,
            height: 200,
            color: Colors.blue,
          ),
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _toggle,
        child: Icon(Icons.play_arrow),
      ),
    );
  }
}
</code></pre><p>é™¤äº† <code>AnimatedOpacity</code> å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„å†…ç½®éšå¼åŠ¨ç”»éƒ¨ä»¶å¦‚ï¼š<code>AnimatedContainer</code>, <code>AnimatedPadding</code>, <code>AnimatedPositioned</code>, <code>AnimatedSwitcher</code>ï¼Œ <code>AnimatedAlign</code> ç­‰ã€‚</p><h2 id="æ˜¾å¼åŠ¨ç”»"><a href="#æ˜¾å¼åŠ¨ç”»" class="headerlink" title="æ˜¾å¼åŠ¨ç”»"></a>æ˜¾å¼åŠ¨ç”»</h2><p>æ˜¾å¼åŠ¨ç”»æŒ‡çš„æ˜¯éœ€è¦æ‰‹åŠ¨è®¾ç½®åŠ¨ç”»çš„æ—¶é—´ï¼Œè¿åŠ¨æ›²çº¿ï¼Œå–å€¼èŒƒå›´çš„åŠ¨ç”»ã€‚å°†å€¼ä¼ é€’ç»™åŠ¨ç”»éƒ¨ä»¶å¦‚: <code>RotationTransition</code>ï¼Œæœ€åä½¿ç”¨ä¸€ä¸ª<code>AnimationController</code> æ§åˆ¶åŠ¨ç”»çš„å¼€å§‹å’Œç»“æŸã€‚</p><img src="./images/flutter-animation-from-zero/explicit-animation.gif" alt="explicit-animation" style="width:240px" width="240"><pre><code class="dart">import &#39;dart:math&#39;;
import &#39;package:flutter/material.dart&#39;;

class RotationAinmationPage extends StatefulWidget {
  @override
  _RotationAinmationPageState createState() =&gt; _RotationAinmationPageState();
}

class _RotationAinmationPageState extends State&lt;RotationAinmationPage&gt;
    with SingleTickerProviderStateMixin {
  AnimationController _controller;
  Animation&lt;double&gt; _turns;
  bool _playing = false;

  // æ§åˆ¶åŠ¨ç”»è¿è¡ŒçŠ¶æ€
  void _toggle() {
    if (_playing) {
      _playing = false;
      _controller.stop();
    } else {
      _controller.forward()..whenComplete(() =&gt; _controller.reverse());
      _playing = true;
    }
    setState(() {});
  }

  @override
  void initState() {
    super.initState();
    // åˆå§‹åŒ–åŠ¨ç”»æ§åˆ¶å™¨ï¼Œè®¾ç½®åŠ¨ç”»æ—¶é—´
    _controller = AnimationController(
      vsync: this,
      duration: Duration(seconds: 10),
    );

    // è®¾ç½®åŠ¨ç”»å–å€¼èŒƒå›´å’Œæ—¶é—´æ›²çº¿
    _turns = Tween(begin: 0.0, end: pi * 2).animate(
      CurvedAnimation(parent: _controller, curve: Curves.easeIn),
    );
  }

  @override
  void dispose() {
    super.dispose();
    _controller.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text(&#39;æ˜¾ç¤ºåŠ¨ç”»&#39;)),
      body: Center(
        child: RotationTransition(
          // ä¼ å…¥åŠ¨ç”»å€¼
          turns: _turns,
          child: Container(
            width: 200,
            height: 200,
            child: Image.asset(
              &#39;assets/images/fan.png&#39;,
              fit: BoxFit.cover,
            ),
          ),
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _toggle,
        child: Icon(_playing ? Icons.pause : Icons.play_arrow),
      ),
    );
  }
}
</code></pre><p>é™¤äº† <code>RotationTransition</code> å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„æ˜¾ç¤ºåŠ¨ç”»éƒ¨ä»¶å¦‚ï¼š<code>FadeTransition</code>, <code>ScaleTransition</code>, <code>SizeTransition</code>, <code>SlideTransition</code> ç­‰ã€‚</p><h2 id="Hero-åŠ¨ç”»"><a href="#Hero-åŠ¨ç”»" class="headerlink" title="Hero åŠ¨ç”»"></a>Hero åŠ¨ç”»</h2><p>Hero åŠ¨ç”»æŒ‡çš„æ˜¯åœ¨é¡µé¢åˆ‡æ¢æ—¶ä¸€ä¸ªå…ƒç´ ä»æ—§é¡µé¢è¿åŠ¨åˆ°æ–°é¡µé¢çš„åŠ¨ç”»ã€‚Hero åŠ¨ç”»éœ€è¦ä½¿ç”¨ä¸¤ä¸ª <code>Hero</code> æ§ä»¶å®ç°ï¼šä¸€ä¸ªç”¨æ¥åœ¨æ—§é¡µé¢ä¸­ï¼Œå¦ä¸€ä¸ªåœ¨æ–°é¡µé¢ã€‚ä¸¤ä¸ª <code>Hero</code> æ§ä»¶éœ€è¦ä½¿ç”¨ç›¸åŒçš„ <code>tag</code> å±æ€§ï¼Œå¹¶ä¸”ä¸èƒ½ä¸å…¶ä»–<code>tag</code>é‡å¤ã€‚</p><img src="./images/flutter-animation-from-zero/hero-animation.gif" alt="hero-animation" style="width:240px" width="240"><pre><code class="dart">// é¡µé¢ 1
import &#39;package:flutter/material.dart&#39;;

import &#39;hero_animation_page2.dart&#39;;

String cake1 = &#39;assets/images/cake01.jpg&#39;;
String cake2 = &#39;assets/images/cake02.jpg&#39;;

class HeroAnimationPage1 extends StatelessWidget {
  GestureDetector buildRowItem(context, String image) {
    return GestureDetector(
      onTap: () {
        // è·³è½¬åˆ°é¡µé¢ 2
        Navigator.of(context).push(
          MaterialPageRoute(builder: (ctx) {
            return HeroAnimationPage2(image: image);
          }),
        );
      },
      child: Container(
        width: 100,
        height: 100,
        child: Hero(
          // è®¾ç½® Hero çš„ tag å±æ€§
          tag: image,
          child: ClipOval(child: Image.asset(image)),
        ),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text(&#39;é¡µé¢ 1&#39;)),
      body: Column(
        children: &lt;Widget&gt;[
          SizedBox(height: 40.0),
          Row(
            mainAxisAlignment: MainAxisAlignment.spaceAround,
            children: &lt;Widget&gt;[
              buildRowItem(context, cake1),
              buildRowItem(context, cake2),
            ],
          ),
        ],
      ),
    );
  }
}

// é¡µé¢ 2
import &#39;package:flutter/material.dart&#39;;

class HeroAnimationPage2 extends StatelessWidget {
  final String image;

  const HeroAnimationPage2({@required this.image});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: CustomScrollView(
        slivers: &lt;Widget&gt;[
          SliverAppBar(
            expandedHeight: 400.0,
            title: Text(&#39;é¡µé¢ 2&#39;),
            backgroundColor: Colors.grey[200],
            flexibleSpace: FlexibleSpaceBar(
              collapseMode: CollapseMode.parallax,
              background: Hero(
                // ä½¿ç”¨ä»é¡µé¢ 1 ä¼ å…¥çš„ tag å€¼
                tag: image,
                child: Container(
                  decoration: BoxDecoration(
                    image: DecorationImage(
                      image: AssetImage(image),
                      fit: BoxFit.cover,
                    ),
                  ),
                ),
              ),
            ),
          ),
          SliverList(
            delegate: SliverChildListDelegate(
              &lt;Widget&gt;[
                Container(height: 600.0, color: Colors.grey[200]),
              ],
            ),
          ),
        ],
      ),
    );
  }
}

</code></pre><h2 id="äº¤ç»‡åŠ¨ç”»"><a href="#äº¤ç»‡åŠ¨ç”»" class="headerlink" title="äº¤ç»‡åŠ¨ç”»"></a>äº¤ç»‡åŠ¨ç”»</h2><p>äº¤ç»‡åŠ¨ç”»æ˜¯ç”±ä¸€ç³»åˆ—çš„å°åŠ¨ç”»ç»„æˆçš„åŠ¨ç”»ã€‚æ¯ä¸ªå°åŠ¨ç”»å¯ä»¥æ˜¯è¿ç»­æˆ–é—´æ–­çš„ï¼Œä¹Ÿå¯ä»¥ç›¸äº’é‡å ã€‚å…¶å…³é”®ç‚¹åœ¨äºä½¿ç”¨ <code>Interval</code> éƒ¨ä»¶ç»™æ¯ä¸ªå°åŠ¨ç”»è®¾ç½®ä¸€ä¸ªæ—¶é—´é—´éš”ï¼Œä»¥åŠä¸ºæ¯ä¸ªåŠ¨ç”»çš„è®¾ç½®ä¸€ä¸ªå–å€¼èŒƒå›´ <code>Tween</code>ï¼Œæœ€åä½¿ç”¨ä¸€ä¸ª <code>AnimationController</code> æ§åˆ¶æ€»ä½“çš„åŠ¨ç”»çŠ¶æ€ã€‚</p><p><code>Interval</code> ç»§æ‰¿è‡³ <code>Curve</code> ç±»ï¼Œé€šè¿‡è®¾ç½®å±æ€§ <code>begin</code> å’Œ <code>end</code> æ¥ç¡®å®šè¿™ä¸ªå°åŠ¨ç”»çš„è¿è¡ŒèŒƒå›´ã€‚</p><pre><code class="dart">class Interval extends Curve {
  /// ...

  /// åŠ¨ç”»èµ·å§‹ç‚¹
  final double begin;
  /// åŠ¨ç”»ç»“æŸç‚¹
  final double end;
  /// åŠ¨ç”»ç¼“åŠ¨æ›²çº¿
  final Curve curve;

  /// ...
}
</code></pre><img src="./images/flutter-animation-from-zero/staggered-animation.gif" alt="staggered-animation" style="width:240px" width="240"><p>è¿™æ˜¯ä¸€ä¸ªç”± 5 ä¸ªå°åŠ¨ç”»ç»„æˆçš„äº¤ç»‡åŠ¨ç”»ï¼Œå®½åº¦ï¼Œé«˜åº¦ï¼Œé¢œè‰²ï¼Œåœ†è§’ï¼Œè¾¹æ¡†ï¼Œæ¯ä¸ªåŠ¨ç”»éƒ½æœ‰è‡ªå·±çš„åŠ¨ç”»åŒºé—´ã€‚</p><p><img src="./images/flutter-animation-from-zero/staggered-animation-timeline.png" alt="staggered-animation-timeline"></p><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;

class StaggeredAnimationPage extends StatefulWidget {
  @override
  _StaggeredAnimationPageState createState() =&gt; _StaggeredAnimationPageState();
}

class _StaggeredAnimationPageState extends State&lt;StaggeredAnimationPage&gt;
    with SingleTickerProviderStateMixin {
  AnimationController _controller;
  Animation&lt;double&gt; _width;
  Animation&lt;double&gt; _height;
  Animation&lt;Color&gt; _color;
  Animation&lt;double&gt; _border;
  Animation&lt;BorderRadius&gt; _borderRadius;

  void _play() {
    if (_controller.isCompleted) {
      _controller.reverse();
    } else {
      _controller.forward();
    }
  }

  @override
  void initState() {
    super.initState();

    _controller = AnimationController(
      vsync: this,
      duration: Duration(seconds: 5),
    );

    _width = Tween&lt;double&gt;(
      begin: 100,
      end: 300,
    ).animate(
      CurvedAnimation(
        parent: _controller,
        curve: Interval(
          0.0,
          0.2,
          curve: Curves.ease,
        ),
      ),
    );

    _height = Tween&lt;double&gt;(
      begin: 100,
      end: 300,
    ).animate(
      CurvedAnimation(
        parent: _controller,
        curve: Interval(
          0.2,
          0.4,
          curve: Curves.ease,
        ),
      ),
    );

    _color = ColorTween(
      begin: Colors.blue,
      end: Colors.yellow,
    ).animate(
      CurvedAnimation(
        parent: _controller,
        curve: Interval(
          0.4,
          0.6,
          curve: Curves.ease,
        ),
      ),
    );

    _borderRadius = BorderRadiusTween(
      begin: BorderRadius.circular(0.0),
      end: BorderRadius.circular(150.0),
    ).animate(
      CurvedAnimation(
        parent: _controller,
        curve: Interval(
          0.6,
          0.8,
          curve: Curves.ease,
        ),
      ),
    );

    _border = Tween&lt;double&gt;(
      begin: 0,
      end: 25,
    ).animate(
      CurvedAnimation(
        parent: _controller,
        curve: Interval(0.8, 1.0),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text(&#39;äº¤ç»‡åŠ¨ç”»&#39;)),
      body: Center(
        child: AnimatedBuilder(
          animation: _controller,
          builder: (BuildContext context, Widget child) {
            return Container(
              width: _width.value,
              height: _height.value,
              decoration: BoxDecoration(
                color: _color.value,
                borderRadius: _borderRadius.value,
                border: Border.all(
                  width: _border.value,
                  color: Colors.orange,
                ),
              ),
            );
          },
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _play,
        child: Icon(Icons.refresh),
      ),
    );
  }
}
</code></pre><h2 id="ç‰©ç†åŠ¨ç”»"><a href="#ç‰©ç†åŠ¨ç”»" class="headerlink" title="ç‰©ç†åŠ¨ç”»"></a>ç‰©ç†åŠ¨ç”»</h2><p>ç‰©ç†åŠ¨ç”»æ˜¯ä¸€ç§æ¨¡æ‹Ÿç°å®ä¸–ç•Œç‰©ä½“è¿åŠ¨çš„åŠ¨ç”»ã€‚éœ€è¦å»ºç«‹ç‰©ä½“çš„è¿åŠ¨æ¨¡å‹ï¼Œä»¥ä¸€ä¸ªç‰©ä½“ä¸‹è½ä¸ºä¾‹ï¼Œè¿™ä¸ªè¿åŠ¨å—åˆ°ç‰©ä½“çš„ä¸‹è½é«˜åº¦ï¼Œé‡åŠ›åŠ é€Ÿåº¦ï¼Œåœ°é¢çš„åä½œç”¨åŠ›ç­‰å› ç´ çš„å½±å“ã€‚</p><img src="./images/flutter-animation-from-zero/throw-animation.gif" alt="throw-animation" style="width:240px" width="240"><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;
import &#39;package:flutter/scheduler.dart&#39;;

class ThrowAnimationPage extends StatefulWidget {
  @override
  _ThrowAnimationPageState createState() =&gt; _ThrowAnimationPageState();
}

class _ThrowAnimationPageState extends State&lt;ThrowAnimationPage&gt; {
  // çƒå¿ƒé«˜åº¦
  double y = 70.0;
  // Y è½´é€Ÿåº¦
  double vy = -10.0;
  // é‡åŠ›
  double gravity = 0.1;
  // åœ°é¢åå¼¹åŠ›
  double bounce = -0.5;
  // çƒçš„åŠå¾„
  double radius = 50.0;
  // åœ°é¢é«˜åº¦
  final double height = 700;

  // ä¸‹è½æ–¹æ³•
  void _fall(_) {
    y += vy;
    vy += gravity;

    // å¦‚æœçƒä½“æ¥è§¦åˆ°åœ°é¢ï¼Œæ ¹æ®åœ°é¢åå¼¹åŠ›æ”¹å˜çƒä½“çš„ Y è½´é€Ÿåº¦
    if (y + radius &gt; height) {
      y = height - radius;
      vy *= bounce;
    } else if (y - radius &lt; 0) {
      y = 0 + radius;
      vy *= bounce;
    }

    setState(() {});
  }

  @override
  void initState() {
    super.initState();
    // ä½¿ç”¨ä¸€ä¸ª Ticker åœ¨æ¯æ¬¡æ›´æ–°ç•Œé¢æ—¶è¿è¡Œçƒä½“ä¸‹è½æ–¹æ³•
    Ticker(_fall)..start();
  }

  @override
  Widget build(BuildContext context) {
    double screenWidth = MediaQuery.of(context).size.width;

    return Scaffold(
      appBar: AppBar(title: Text(&#39;ç‰©ç†åŠ¨ç”»&#39;)),
      body: Column(
        children: &lt;Widget&gt;[
          Container(
            height: height,
            child: Stack(
              children: &lt;Widget&gt;[
                Positioned(
                  top: y - radius,
                  left: screenWidth / 2 - radius,
                  child: Container(
                    width: radius * 2,
                    height: radius * 2,
                    decoration: BoxDecoration(
                      color: Colors.blue,
                      shape: BoxShape.circle,
                    ),
                  ),
                ),
              ],
            ),
          ),
          Expanded(child: Container(color: Colors.blue)),
        ],
      ),
    );
  }
}
</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Flutter ä¸­å¤šç§ç±»å‹çš„åŠ¨ç”»ï¼Œåˆ†åˆ«æ˜¯</p><ul><li>éšå¼åŠ¨ç”»</li><li>æ˜¾å¼åŠ¨ç”»</li><li>Hero åŠ¨ç”»</li><li>äº¤ç»‡åŠ¨ç”»</li><li>åŸºäºç‰©ç†çš„åŠ¨ç”»</li></ul><p>ä¸€ä¸ªåŠ¨ç”»çš„ä¸»è¦å› ç´ æœ‰</p><ul><li><code>Animation</code> åŠ¨ç”»å¯¹è±¡</li><li><code>AnimationController</code> åŠ¨ç”»æ§åˆ¶å™¨</li><li><code>Tween</code> åŠ¨ç”»å–å€¼èŒƒå›´</li><li><code>Curve</code> åŠ¨ç”»è¿åŠ¨æ›²çº¿</li></ul><p>Flutter åŠ¨ç”»åŸºäºç±»å‹åŒ–çš„ <code>Animation</code> å¯¹è±¡ï¼Œ<code>Widgets</code> é€šè¿‡è¯»å–åŠ¨ç”»å¯¹è±¡çš„å½“å‰å€¼å’Œç›‘å¬çŠ¶æ€å˜åŒ–é‡æ–°è¿è¡Œ <code>build</code> å‡½æ•°ï¼Œä¸æ–­å˜åŒ– UI å½¢æˆåŠ¨ç”»æ•ˆæœã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://medium.com/flutter/flutter-animation-basics-with-implicit-animations-95db481c5916" target="_blank" rel="noopener">Flutter animation basics with implicit animations</a></p><p><a href="https://medium.com/flutter/directional-animations-with-built-in-explicit-animations-3e7c5e6fbbd7" target="_blank" rel="noopener">Directional animations with built-in explicit animations</a></p><p><a href="https://flutter.cn/docs/development/ui/animations" target="_blank" rel="noopener">åŠ¨ç”»æ•ˆæœä»‹ç»</a></p><p><a href="https://book.flutterchina.club/chapter9/intro.html" target="_blank" rel="noopener">FlutteråŠ¨ç”»ç®€ä»‹</a></p><p><a href="https://flutter.cn/docs/development/ui/animations/tutorial" target="_blank" rel="noopener">åœ¨ Flutter åº”ç”¨é‡Œå®ç°åŠ¨ç”»æ•ˆæœ</a></p></section><hr><p class="article-license"><span>æœ¬æ–‡é‡‡ç”¨<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans" target="_blank">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ </span><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans" target="_blank"><img class="license-img" alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" src="https://img.shields.io/badge/license-BY--NC--SA%204.0-green"></a></p></article><section class="prev-next card slide-in-right"><a href="/post/2020/05/07/flutter-animation-decision/" class="link prev" title="é€‰æ‹©é€‚åˆçš„ Flutter åŠ¨ç”»æ§ä»¶"><span class="hover-underline-animation">&larr; é€‰æ‹©é€‚åˆçš„ Flutter åŠ¨ç”»æ§ä»¶</span> </a><a href="/post/2020/04/13/flutter-stream/" class="link next" title="åœ¨ Flutter é‡Œä½¿ç”¨ Stream"><span class="hover-underline-animation">åœ¨ Flutter é‡Œä½¿ç”¨ Stream &rarr;</span></a></section><section class="article-toc"><div class="card"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰è¨€"><span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Flutter-ä¸­çš„åŠ¨ç”»"><span class="toc-text">Flutter ä¸­çš„åŠ¨ç”»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åŸºç¡€æ¦‚å¿µ"><span class="toc-text">åŸºç¡€æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#éšå¼åŠ¨ç”»"><span class="toc-text">éšå¼åŠ¨ç”»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ˜¾å¼åŠ¨ç”»"><span class="toc-text">æ˜¾å¼åŠ¨ç”»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hero-åŠ¨ç”»"><span class="toc-text">Hero åŠ¨ç”»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äº¤ç»‡åŠ¨ç”»"><span class="toc-text">äº¤ç»‡åŠ¨ç”»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç‰©ç†åŠ¨ç”»"><span class="toc-text">ç‰©ç†åŠ¨ç”»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒ"><span class="toc-text">å‚è€ƒ</span></a></li></ol></div><div class="card uk-inline-clip uk-padding-remove"><img class="zanshang-img" src="/zanshang.jpg"></div></section><section class="article slide-in-right"><div class="loader" id="loader"><svg viewBox="0 0 50 50"><circle class="ring" cx="25" cy="25" r="20"></circle><circle class="ball" cx="25" cy="5" r="3.5"></circle></svg></div><div class="comment" id="utteranc"></div><noscript>Please activate JavaScript for normal use of comments</noscript></section><a class="card back-to-top" id="backTop">&UpArrow;</a><div id="player"></div></main><script>window.COLD_STONE={root:"/",author:"ColdStone",gaid:"UA-119658292-2",repo:"xrr2016/blog"}</script><script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script><script>hljs.initHighlightingOnLoad()</script><script src="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.js" integrity="sha256-6Y7CJDaltoeNgk+ZftgCD9jLgmGv4xKUo8nQ0HgAwVo=" crossorigin="anonymous"></script><script>const ap = new APlayer({
		container: document.getElementById('player'),
		fixed: true,
		audio: [{
				name: 'DNFÂ·é£ä¸€æ ·çš„å‹‡å£«ç¼–é’Ÿå›½ä¹ç‰ˆ',
				artist: 'æ¹–åŒ—çœåšç‰©é¦†ç¼–é’Ÿä¹å›¢',
				url: './audios/dnf.mp3',
				cover: './images/cover.jpg',
			},
			{
				name: 'ã•ãã‚‰ï½ã‚ãªãŸã«å‡ºä¼šãˆã¦ã‚ˆã‹ã£ãŸï½',
				artist: 'Real Street Performance',
				url: './audios/dnf.mp3',
				cover: './images/cover2.jpg',
			},
			// {
			// name: 'æˆ‘ä¸é…',
			// artist: 'å‘¨æ°ä¼¦',
			// url: './audios/dnf.mp3',
			// cover: './images/cover3.jpg',
			// }
		]
	});</script><script src="/scripts/busuanzi.js" referrerpolicy="origin"></script><script src="/scripts/cold-stone.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5eeae335b32b6f13"></script><script src="//www.googletagmanager.com/gtag/js?id=UA-119658292-2"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config",window.COLD_STONE.gaid)</script></body></html>